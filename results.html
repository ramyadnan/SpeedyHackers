<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results</title>
    <link rel="stylesheet" href="result.css">
</head>
<body>

    <div class="container">
        <h1>Your Life Expectancy Result</h1>
        
        <!-- <h2>Submitted Information</h2> -->
        <p>Your estimated life expectancy is <span id="life-expectancy"></span> years</p>
        <p>You fall into the category: <span id="category"></span></p>

        <div id="category-image-container">
            <img id="category-image" src="" alt="Category Image">
        </div>
        <div id="category-description"></div>

        <!-- <div id="submittedData"></div> -->

        <a href="health-input-form.html">Go Back to Form</a>
    </div>

    <script>
        // Function to get query parameters from the URL
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            let age = parseInt(params.get('age'));
            let gender = params.get('gender');
            let weight = parseInt(params.get('weight'));
            let height = parseInt(params.get('height'));
            let activityLevel = params.get('activityLevel');
            let diet = params.get('diet');
            let calories = parseInt(params.get('calories'));
            let alcohol = params.get('alcohol');
            let smoking = params.get('smoking');
            let sleepHours = parseInt(params.get('sleepHours'));
            let stressLevel = parseInt(params.get('stressLevel'));
    
            // Example calculation for life expectancy (simplified)
            let lifeExpectancy = 80; // Start with a base value
            if (age) lifeExpectancy -= age * 0.2;
            if (activityLevel === 'sedentary') lifeExpectancy -= 5;
            if (smoking === 'yes') lifeExpectancy -= 10;
            if (alcohol === 'daily') lifeExpectancy -= 5;
    
            // Determine category based on life expectancy
            let category = "";
            if (lifeExpectancy <= 50) {
                category = "Critical";
            } else if (lifeExpectancy <= 60) {
                category = "Suboptimal";
            } else if (lifeExpectancy <= 70) {
                category = "Stable";
            } else if (lifeExpectancy <= 80) {
                category = "Vibrant";
            } else {
                category = "Timeless";
            }
    
            // Set the results on the page
            document.getElementById('life-expectancy').textContent = lifeExpectancy.toFixed(1);
            document.getElementById('category').textContent = category;
    
            // Optionally set image or description based on category
            let imgElement = document.getElementById('category-image');
            imgElement.src = 'images/' + category.toLowerCase() + '.png'; 
            document.getElementById('category-description').textContent = getCategoryDescription(category);
        }
    
        // Function to get a description based on the category
        function getCategoryDescription(category) {
            switch (category) {
                case "Critical":
                    return "Your health is at significant risk; lifestyle changes are strongly recommended.";
                case "Suboptimal":
                    return "There is room for improvement in your health. Consider healthier habits.";
                case "Stable":
                    return "Your health is stable. Maintaining your current lifestyle is beneficial.";
                case "Vibrant":
                    return "You have a vibrant health profile. Keep up the great work!";
                case "Timeless":
                    return "You are in excellent health. You may enjoy a long and healthy life!";
                default:
                    return "";
            }
        }
    
        // Call the function on page load
        window.onload = getQueryParams;
    </script>
    
</body>
</html>
